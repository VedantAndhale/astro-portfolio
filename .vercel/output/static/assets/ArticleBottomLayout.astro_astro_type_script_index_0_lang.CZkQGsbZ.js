const n=document.getElementById("reading-progress"),a=document.querySelector("article");n&&a&&window.addEventListener("scroll",()=>{const t=document.body.scrollTop||document.documentElement.scrollTop,e=a.getBoundingClientRect(),s=e.top+t-100,c=e.height,o=(t-s)/c*100;o<0?n.style.width="0%":o>100?n.style.width="100%":n.style.width=o+"%"});const r=document.getElementById("toc"),i=a?.querySelectorAll("h2, h3");if(r&&i&&i.length>0){const t=document.createDocumentFragment();i.forEach((e,s)=>{e.id||(e.id="section-"+s);const c=e.tagName==="H3",o=document.createElement("a");o.href="#"+e.id,o.textContent=e.textContent,o.className=c?"block text-gray-600 dark:text-gray-400 mb-2 ml-3 pl-2 border-l border-gray-300 dark:border-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors":"block text-gray-800 dark:text-gray-200 font-medium mb-2 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",t.appendChild(o)}),r.appendChild(t)}else r&&document.getElementById("toc-container")?.classList.add("hidden");const l=document.querySelector('script[src="https://giscus.app/client.js"]'),d=()=>{const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l?.setAttribute("data-theme",t);const e=document.querySelector("iframe.giscus-frame");e?.contentWindow&&e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")};l&&(d(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",d));const m=t=>{const e=document.querySelector("iframe.giscus-frame");e?.contentWindow&&e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")};window.addEventListener("themeToggle",t=>{const s=t.detail.theme;m(s)});const g=()=>{const t=localStorage.getItem("theme"),e=window.matchMedia("(prefers-color-scheme: dark)").matches,s=t||(e?"dark":"light"),c=document.querySelector("iframe.giscus-frame");c?.contentWindow&&c.contentWindow.postMessage({giscus:{setConfig:{theme:s}}},"https://giscus.app")};g();
