---
import type { CollectionEntry } from "astro:content";
import PageLayout from "./PageLayout.astro";

type Props = {
    entry: CollectionEntry<"projects"> | CollectionEntry<"blog">;
};

const { entry } = Astro.props;
const { data } = entry;
const { title, summary, ogImage } = data;

// Properly resolve OG image path based on collection and entry
const resolvedOgImage = ogImage
    ? ogImage.startsWith("./")
        ? `/src/content/${entry.collection}/${entry.slug}/${ogImage.slice(2)}`
        : ogImage.startsWith("/")
          ? ogImage
          : `/src/content/${entry.collection}/${entry.slug}/${ogImage}`
    : "/open-graph.png";
---

<PageLayout title={title} description={summary} image={resolvedOgImage}>
    <slot />
</PageLayout>
