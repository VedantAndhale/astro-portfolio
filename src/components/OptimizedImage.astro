---
// OptimizedImage.astro - Optimizes images for better performance
interface Props {
    src: string;
    alt: string;
    width: number;
    height: number;
    class?: string;
    loading?: "lazy" | "eager";
    decoding?: "async" | "sync" | "auto";
    sizes?: string;
}

const {
    src,
    alt,
    width,
    height,
    class: className = "",
    loading = "lazy",
    decoding = "async",
    sizes = "100vw",
} = Astro.props;

import { Image } from "astro:assets";

// Handle both remote and local images
const isRemoteImage = src.startsWith("http");
---

{
    isRemoteImage ? (
        <img
            src={src}
            alt={alt}
            width={width}
            height={height}
            class={className}
            loading={loading}
            decoding={decoding}
            sizes={sizes}
        />
    ) : (
        <Image
            src={src}
            alt={alt}
            width={width}
            height={height}
            class={className}
            loading={loading}
            quality={80}
            format="webp"
            decoding={decoding}
            sizes={sizes}
        />
    )
}
